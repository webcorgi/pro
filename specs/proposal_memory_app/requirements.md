# 요구사항 문서 (Requirements Document)

## 소개 (Introduction)

이 문서는 **프로포즈용 추억남기기 웹앱**의 기능 요구사항을 정의합니다.  
이 애플리케이션은 프로포즈 당일의 소중한 순간들을 기록하고 보존하기 위한 PWA(Progressive Web App)입니다.  
사용자는 웹 브라우저를 통해 접근할 수 있으며, 모바일 기기에서 앱처럼 설치하여 오프라인에서도 사용할 수 있습니다.

**핵심 목표:**
- 프로포즈 당일 촬영한 이미지 및 비디오를 안전하게 저장
- 저장된 미디어를 쉽게 탐색하고 재생
- 프로포즈 편지를 작성하고 관리
- 메인 영상을 재생하여 특별한 순간을 다시 경험

---

## 기술 스택 (Tech Stack)

- 프론트엔드: Next.js + TypeScript + CSS
- 백엔드: Node.js (Express)
- 데이터베이스: MySQL
- 플랫폼: PWA (Service Worker, Web App Manifest)

---

## 요구사항 (Requirements)

### 요구사항 1: PWA 설치 및 오프라인 지원

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 웹앱을 모바일 기기에 설치하여 앱처럼 사용할 수 있기를 원한다.  
그래야 인터넷 연결 없이도 내 추억을 언제든지 볼 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 모바일 브라우저에서 웹앱에 접근하면,  
   **THEN** 시스템은 "홈 화면에 추가" 또는 "앱 설치" 옵션을 제공해야 한다.

2. **WHEN** 사용자가 웹앱을 설치하면,  
   **THEN** 시스템은 홈 화면에 앱 아이콘이 생성되어야 하며,  
   **AND** 앱 아이콘을 탭하면 독립적인 앱 창으로 실행되어야 한다.

3. **WHEN** 사용자가 오프라인 상태에서 앱에 접근하면,  
   **THEN** 시스템은 이전에 캐시된 콘텐츠를 표시할 수 있어야 한다.

4. **IF** 사용자가 오프라인 상태에서 새로운 미디어를 업로드하려고 시도하면,  
   **THEN** 시스템은 업로드 대기열에 추가하고,  
   **AND** 온라인 상태가 되면 자동으로 업로드를 재시도해야 한다.

---

### 요구사항 2: 이미지 및 비디오 업로드 및 저장

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 프로포즈 당일 촬영한 이미지와 비디오를 앱에 업로드하여 저장할 수 있기를 원한다.  
그래야 소중한 순간들을 안전하게 보존할 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 이미지 또는 비디오 업로드 버튼을 클릭하면,  
   **THEN** 시스템은 기기의 갤러리/카메라 접근 권한을 요청해야 하며,  
   **AND** 파일 선택 인터페이스를 제공해야 한다.

2. **WHEN** 사용자가 하나 이상의 이미지 또는 비디오 파일을 선택하면,  
   **THEN** 시스템은 선택된 파일들을 업로드 대기열에 추가해야 하며,  
   **AND** 업로드 진행 상태를 시각적으로 표시해야 한다.

3. **WHEN** 파일 업로드가 완료되면,  
   **THEN** 시스템은 파일을 안전하게 저장해야 하며,  
   **AND** 업로드된 미디어를 미디어 갤러리에 표시해야 한다.

4. **IF** 업로드 중 네트워크 오류가 발생하면,  
   **THEN** 시스템은 오류 메시지를 표시해야 하며,  
   **AND** 재시도 옵션을 제공해야 한다.

5. **WHEN** 사용자가 대용량 파일을 업로드하려고 시도하면,  
   **THEN** 시스템은 파일 크기 제한을 확인하고,  
   **IF** 제한을 초과하면 경고 메시지를 표시해야 한다.

6. **WHEN** 비디오 파일이 업로드되면,  
   **THEN** 시스템은 썸네일을 자동 생성하여 미리보기로 표시해야 한다.

---

### 요구사항 3: 미디어 갤러리 및 탐색

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 저장된 이미지와 비디오를 쉽게 탐색하고 볼 수 있기를 원한다.  
그래야 원하는 순간을 빠르게 찾아 다시 경험할 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 미디어 갤러리 화면에 접근하면,  
   **THEN** 시스템은 저장된 모든 이미지와 비디오를 그리드 또는 리스트 형태로 표시해야 한다.

2. **WHEN** 사용자가 특정 이미지를 탭하면,  
   **THEN** 시스템은 전체 화면 이미지 뷰어를 표시해야 하며,  
   **AND** 좌우 스와이프로 다른 이미지로 이동할 수 있어야 한다.

3. **WHEN** 사용자가 비디오 썸네일을 탭하면,  
   **THEN** 시스템은 비디오 플레이어를 표시하고 재생을 시작해야 한다.

4. **WHEN** 사용자가 비디오를 재생 중일 때,  
   **THEN** 시스템은 재생/일시정지, 진행 바, 볼륨 조절 등의 기본 컨트롤을 제공해야 한다.

5. **IF** 사용자가 미디어 갤러리에서 스크롤하면,  
   **THEN** 시스템은 무한 스크롤 또는 페이지네이션을 통해 추가 미디어를 로드해야 한다.

6. **WHEN** 사용자가 특정 미디어를 길게 누르면,  
   **THEN** 시스템은 삭제, 다운로드, 공유 등의 옵션 메뉴를 표시해야 한다.

---

### 요구사항 4: 프로포즈 편지 작성 및 관리

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 프로포즈 편지를 작성하고 저장할 수 있기를 원한다.  
그래야 특별한 날의 감정과 메시지를 영구적으로 보존할 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 "편지 작성" 버튼을 클릭하면,  
   **THEN** 시스템은 편지 작성 에디터를 표시해야 한다.

2. **WHEN** 사용자가 편지 내용을 입력하면,  
   **THEN** 시스템은 실시간으로 자동 저장해야 하며,  
   **AND** 입력 내용이 손실되지 않도록 해야 한다.

3. **WHEN** 사용자가 편지 작성 중에 앱을 종료하거나 이탈하면,  
   **THEN** 시스템은 작성 중인 내용을 임시 저장하고,  
   **AND** 다음 접속 시 이어서 작성할 수 있도록 해야 한다.

4. **WHEN** 사용자가 편지를 저장하면,  
   **THEN** 시스템은 편지를 안전하게 저장해야 하며,  
   **AND** 편지 목록 화면에 표시해야 한다.

5. **WHEN** 사용자가 저장된 편지를 탭하면,  
   **THEN** 시스템은 편지 전체 내용을 읽기 모드로 표시해야 한다.

6. **WHEN** 사용자가 편지를 수정하려고 하면,  
   **THEN** 시스템은 편집 모드로 전환해야 하며,  
   **AND** 수정 후 저장 옵션을 제공해야 한다.

7. **IF** 사용자가 편지를 삭제하려고 하면,  
   **THEN** 시스템은 삭제 확인 대화상자를 표시해야 하며,  
   **AND** 확인 후에만 삭제를 수행해야 한다.

---

### 요구사항 5: 메인 영상 재생

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 특별히 선택한 메인 영상을 재생할 수 있기를 원한다.  
그래야 프로포즈의 가장 중요한 순간을 언제든지 다시 경험할 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 메인 화면에 접근하면,  
   **THEN** 시스템은 메인 영상 섹션을 표시해야 하며,  
   **AND** 메인 영상이 설정되어 있지 않으면 설정 안내를 표시해야 한다.

2. **WHEN** 사용자가 메인 영상을 설정하지 않았을 때 "메인 영상 설정" 버튼을 클릭하면,  
   **THEN** 시스템은 저장된 비디오 목록을 표시하고,  
   **AND** 사용자가 하나를 선택할 수 있도록 해야 한다.

3. **WHEN** 사용자가 메인 영상을 선택하면,  
   **THEN** 시스템은 해당 영상을 메인 영상으로 설정해야 하며,  
   **AND** 메인 화면에 썸네일과 재생 버튼을 표시해야 한다.

4. **WHEN** 사용자가 메인 영상 재생 버튼을 클릭하면,  
   **THEN** 시스템은 전체 화면 비디오 플레이어를 표시하고,  
   **AND** 영상을 자동으로 재생해야 한다.

5. **WHEN** 메인 영상이 재생 중일 때,  
   **THEN** 시스템은 재생/일시정지, 진행 바, 볼륨, 전체화면 토글 등의 컨트롤을 제공해야 한다.

6. **IF** 사용자가 메인 영상을 변경하고 싶으면,  
   **THEN** 시스템은 설정 메뉴에서 메인 영상을 변경할 수 있는 옵션을 제공해야 한다.

---

### 요구사항 6: 데이터 보안 및 프라이버시

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 내 개인적인 추억 데이터가 안전하게 보호되기를 원한다.  
그래야 민감한 정보가 외부에 유출되지 않는다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 앱에 처음 접근하면,  
   **THEN** 시스템은 개인정보 처리방침 및 이용약관에 대한 동의를 요청해야 한다.

2. **WHEN** 데이터가 저장될 때,  
   **THEN** 시스템은 암호화된 연결(HTTPS)을 통해 전송해야 하며,  
   **AND** 저장소에 저장될 때도 적절한 보안 조치를 적용해야 한다.

3. **IF** 사용자가 앱 삭제를 요청하면,  
   **THEN** 시스템은 모든 사용자 데이터를 완전히 삭제해야 한다.

4. **WHEN** 사용자가 오프라인에서 사용할 때,  
   **THEN** 시스템은 로컬 저장소에 저장된 데이터를 다른 앱이 접근할 수 없도록 보호해야 한다.

---

### 요구사항 7: 사용자 경험 및 성능

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 앱이 빠르고 직관적으로 작동하기를 원한다.  
그래야 스트레스 없이 추억을 기록하고 즐길 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 앱을 처음 실행하면,  
   **THEN** 시스템은 3초 이내에 초기 화면을 표시해야 한다.

2. **WHEN** 이미지나 비디오를 로드할 때,  
   **THEN** 시스템은 로딩 인디케이터를 표시해야 하며,  
   **AND** 점진적 로딩(Progressive Loading)을 통해 사용자 경험을 개선해야 한다.

3. **WHEN** 사용자가 미디어 갤러리를 스크롤할 때,  
   **THEN** 시스템은 부드러운 스크롤 성능을 유지해야 하며,  
   **AND** 프레임 드롭이 발생하지 않아야 한다.

4. **IF** 네트워크 연결이 느릴 때,  
   **THEN** 시스템은 낮은 품질의 미리보기를 먼저 표시하고,  
   **AND** 고품질 이미지는 백그라운드에서 점진적으로 로드해야 한다.

5. **WHEN** 사용자가 잘못된 동작을 수행하면,  
   **THEN** 시스템은 명확하고 이해하기 쉬운 오류 메시지를 표시해야 한다.

---

### 요구사항 8: 메인화면 지도에 프로포즈 장소 표시

**사용자 스토리 (User Story):**  
일반 사용자로서, 나는 메인 화면에서 지도를 통해 프로포즈 장소를 한눈에 보고 싶다.  
그래야 특별한 장소를 빠르게 떠올리고 바로 미디어와 편지에 접근할 수 있다.

#### 승인 기준 (Acceptance Criteria)

1. **WHEN** 사용자가 처음 앱을 설정할 때,  
   **THEN** 시스템은 프로포즈 장소를 설정하도록 안내해야 하며(검색 또는 지도 핀 지정),  
   **AND** 장소 정보(위도, 경도, 장소명/메모)를 저장해야 한다.

2. **WHEN** 메인 화면에 접근하면,  
   **THEN** 시스템은 지도를 표시하고 저장된 프로포즈 장소에 마커를 보여줘야 한다.

3. **WHEN** 사용자가 마커를 탭하면,  
   **THEN** 시스템은 장소명, 날짜, 관련 미디어 수 요약과 "보기" 액션(미디어 갤러리/편지 이동)을 제공해야 한다.

4. **IF** 사용자가 장소를 변경하려고 하면,  
   **THEN** 시스템은 장소 검색(지오코딩) 또는 지도의 핀 드래그로 재설정할 수 있도록 해야 한다.

5. **IF** 사용자가 위치 권한을 거부했을 때,  
   **THEN** 시스템은 수동 검색/입력 방식으로 장소를 설정할 수 있도록 해야 한다.

6. **WHEN** 오프라인 상태에서 메인 화면을 열면,  
   **THEN** 시스템은 마지막으로 캐시된 타일/스냅샷을 사용해 지도를 표시하거나,  
   **AND** 최소한 장소명과 좌표를 텍스트로 표시해야 한다.

7. **IF** 사용자가 개인정보 보호를 위해 지도 노출을 비활성화하면,  
   **THEN** 시스템은 지도를 숨기고 장소명만 텍스트로 표시해야 한다.

---

## 기술적 제약 사항 (Technical Constraints)

1. **PWA 요구사항:**
   - Service Worker를 통한 오프라인 지원 필수
   - Web App Manifest 파일 제공 필수
   - HTTPS 환경에서만 동작 (로컬 개발 환경 제외)

2. **미디어 처리:**
   - 지원 이미지 형식: JPEG, PNG, WebP
   - 지원 비디오 형식: MP4, WebM
   - 최대 파일 크기: 이미지 10MB, 비디오 100MB (제한은 조정 가능)

3. **브라우저 호환성:**
   - 최신 버전의 Chrome, Safari, Firefox, Edge 지원
   - 모바일: iOS Safari 12+, Android Chrome 80+

4. **저장소:**
   - 로컬 저장소: IndexedDB 또는 LocalStorage 활용
   - 클라우드 저장소: 선택적 구현 (초기 버전에서는 로컬 우선)

5. **백엔드/데이터베이스:**
   - 백엔드: Node.js(Express) 기반 REST API
   - 데이터베이스: MySQL (미디어 메타데이터, 편지, 장소 정보 보관)

6. **프론트엔드:**
   - Next.js + TypeScript
   - 스타일: CSS (필요 시 CSS 모듈/유틸리티 적용 가능)

7. **지도 및 위치:**
   - 브라우저 Geolocation API는 선택적(권한 거부 시 수동 입력 지원)
   - 지도 SDK(예: 상용 또는 오픈소스 지도 라이브러리) 사용 가능
   - 장소 데이터 모델: { latitude, longitude, placeName, memo, setAt }
   - 타일/스냅샷 캐싱으로 제한적 오프라인 표시 지원

---

## 엣지 케이스 (Edge Cases)

1. **저장 공간 부족:**
   - 기기 저장 공간이 부족할 때 경고 메시지 표시
   - 오래된 미디어 자동 삭제 옵션 제공

2. **네트워크 불안정:**
   - 업로드 중 네트워크 연결이 끊어질 때 재시도 로직
   - 부분 업로드 재개 기능

3. **권한 거부:**
   - 카메라/갤러리 접근 권한이 거부되었을 때 안내 메시지
   - 설정으로 이동하는 링크 제공

4. **대용량 파일:**
   - 업로드 시간이 오래 걸릴 때 진행 상태 표시
   - 백그라운드 업로드 지원

---

## 성공 기준 (Success Criteria)

1. 사용자가 프로포즈 당일 촬영한 모든 미디어를 성공적으로 업로드하고 저장할 수 있다.
2. 사용자가 오프라인 상태에서도 저장된 콘텐츠를 볼 수 있다.
3. 사용자가 PWA를 모바일 기기에 설치하여 네이티브 앱처럼 사용할 수 있다.
4. 메인 영상과 프로포즈 편지를 통해 특별한 순간을 쉽게 다시 경험할 수 있다.
5. 모든 기능이 모바일 환경에서 직관적이고 부드럽게 작동한다.

---

**문서 버전:** 1.0  
**작성일:** 2025-11-06  
**상태:** 초안 (검토 대기 중)

